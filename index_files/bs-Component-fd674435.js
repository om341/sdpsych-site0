var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

define("@widget/REVIEWS/bs-Component-fd674435.js",["exports","@wsb/guac-widget-shared@^1/lib/components/Carousel"],(function(e,t){"use strict";function a(e){return e&&e.__esModule?e.default:e}var o=a(t);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}var i=(global.keyMirror||guac.keymirror)({REVIEWS_SECTION_TITLE_RENDERED:null,REVIEWS_NO_DATA_RENDERED:null,REVIEWS_NOT_CONNECTED_MSG:null,PENDING_VALIDATION_HEADER:null,PENDING_VALIDATION_CONTENT:null,WAITING_FOR_DATA_HEADER:null,WAITING_FOR_DATA_CONTENT:null,SECTION_BACKGROUND:null,REVIEWS_BUSINESS_NAME_RENDERED:null,REVIEWS_CONNECT_BUTTON:null,USER_REVIEW_RENDERED:null,STATIC_REVIEW_RENDERED:null,READ_MORE_RENDERED:null,PRODUCT_LINK_RENDERED:null,REVIEW_TITLE_RENDERED:null,REVIEWER_INFO_RENDERED:null,REVIEWER_INITIAL_RENDERED:null,REVIEWER_PHOTO_RENDERED:null,RECOMMENDATION_RENDERED:null,RECOMMENDATION_ICON_RENDERED:null,RECOMMENDATION_TEXT_RENDERED:null,RECOMMENDATION_DESC_RENDERED:null,RATING_RENDERED:null,LEFT_ARROW_RENDERED:null,RIGHT_ARROW_RENDERED:null,UPGRADE_TIER_MSG:null,REVIEWS_LOADER:null});const l="facebook",s="yelp",c="gmb",g="yotpo",p="manual",d={facebook:"REVIEWS_FB_CONNECT_CLICKED",yelp:"REVIEWS_YELP_CONNECT_CLICKED",gmb:"REVIEWS_GMB_CONNECT_CLICKED",yotpo:"REVIEWS_YOTPO_CONNECT_CLICKED"},u={facebook:"facebook2",yelp:"yelpLogoNegative",gmb:"gmb",yotpo:"yotpo"},m={facebook:"facebook",yelp:"yelpLogoNegative",gmb:"gmb",yotpo:"yotpo"},b={facebook:"fb",yelp:"yelp",gmb:"gmb",yotpo:"yotpo"},h={positive:"fbRecommends",negative:"fbDoesNotRecommend"},E={positive:"recommends",negative:"doesNotRecommend"},R={facebook:"Facebook",gmb:"Google My Business",yelp:"Yelp",yotpo:"Yotpo"},y={facebook:"https://web.archive.org/web/20220420183950/https://graph.facebook.com/v3.0/{id}/picture?height=100&width=100"},w={base:{facebook:"https://web.archive.org/web/20220420183950/https://facebook.com",gmb:"https://web.archive.org/web/20220420183950/https://maps.google.com",yelp:"https://web.archive.org/web/20220420183950/https://www.yelp.com/biz"},photo:{facebook:"https://web.archive.org/web/20220420183950/https://graph.facebook.com/v3.0/{id}/picture"}},v="NOT_SETUP",C="LOADING",f="HAS_REVIEWS",T="FAILED",D="NO_REVIEWS",I="CONNECTED",N="NOT_CONNECTED",_={reseller:{local:"dev-secureserver.net",development:"dev-secureserver.net",test:"test-secureserver.net",production:"secureserver.net"},godaddy:{local:"dev-godaddy.com",development:"dev-godaddy.com",test:"test-godaddy.com",production:"godaddy.com"}},x="LEFT",P="RIGHT",M={facebook:"https://web.archive.org/web/20220420183950/https://dashboard.{rootDomain}/fbPageCreate/{accountId}?home={home}",gmb:"https://web.archive.org/web/20220420183950/https://dashboard.{rootDomain}/account/{accountId}/gmb",yelp:"https://web.archive.org/web/20220420183950/https://dashboard.{rootDomain}/account/{accountId}/yelp",yotpo:"https://{websiteId}.onlinestore.{rootDomain}/admin/general_settings/edit#reviews"},k={yotpo:"https://web.archive.org/web/20220420183950/https://launch.{rootDomain}/?account_uid={accountId}&path=plans"},O={color:"section"},S=[g],U=[p],A={topBar:{display:"flex",alignItems:"center",alignContent:"center",justifyContent:"center",cursor:"pointer",marginBottom:"large","@xs-only":{boxShadow:"none",justifyContent:"center"},"@sm":{justifyContent:"center"}},overallRating:{marginLeft:"small"},ratingStar:{backgroundColor:"transparent",marginHorizontal:"medium","@md":{marginHorizontal:"0px"}},overallRatingContainer:{display:"flex",flexDirection:"column",marginLeft:"small"},overallReviews:{lineHeight:"normal",marginTop:"xxsmall"},recommended:{fontWeight:"bold",lineHeight:"normal"},mobileTopBarContainer:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"0"},businessName:{marginBottom:"xxsmall",lineHeight:"normal"},pageLink:{display:"block",color:"section",":hover":O,":visited":O,textTransform:"none"},pageLinkContainer:{padding:"0",marginBottom:"medium",textAlign:"center"}};class B extends(global.React||guac.react).Component{generateReviewBarStyles(){const{provider:e}=this.props;return{linkProps:{tag:"a",target:S.includes(e)?"_self":"_blank",rel:S.includes(e)?"alternate":"noopener",style:{display:"block"}}}}getBusinessNameBlock(){const{businessName:e}=this.props;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text.Major,{"data-aid":i.REVIEWS_BUSINESS_NAME_RENDERED,style:A.businessName,children:e})}getRecommendationPercentage(){const{positiveRecommendations:e,negativeRecommendations:t}=this.props;return e>0?Math.ceil(100*e/(e+t)):0}getMobileRatingBar(){const{provider:e,overallRating:t,positiveRecommendations:a,staticContent:o,negativeRecommendations:r}=this.props;if(e===l&&a>0){const e=this.getRecommendationPercentage(),t=a+r;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":i.RECOMMENDATION_RENDERED,style:{...A.topBar,flexDirection:"column"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text.Major,{"data-aid":i.RECOMMENDATION_TEXT_RENDERED,style:A.recommended},o.percentRecommend.replace("{percent}",`${e}%`)),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{"data-aid":i.RECOMMENDATION_DESC_RENDERED,style:{...A.overallReviews,textAlign:"center",marginBottom:"small"}},1===t?o.basedOnOne:o.basedOn.replace("{reviewCount}",t)))}return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:A.topBar},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Major,{style:A.overallRating},t.toFixed(1)),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Rating,{"data-aid":i.RATING_RENDERED,rating:t,style:A.ratingStar}))}getDesktopRatingBar(){const{provider:e,positiveRecommendations:t,negativeRecommendations:a,overallRating:o,totalReviews:r,staticContent:n}=this.props;let s=1===r?n.review:n.reviews;if(e===g&&(s=1===r?n.productReview:n.productReviews),e===l&&t>0){const e=this.getRecommendationPercentage(),o=t+a;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":i.RECOMMENDATION_RENDERED,style:A.overallRatingContainer},this.getBusinessNameBlock(),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text.Major,{"data-aid":i.RECOMMENDATION_TEXT_RENDERED,style:A.recommended},n.percentRecommend.replace("{percent}",`${e}%`)),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{"data-aid":i.RECOMMENDATION_DESC_RENDERED,style:A.overallReviews},1===o?n.basedOnOne:n.basedOn.replace("{reviewCount}",o)))}return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:A.overallRatingContainer},this.getBusinessNameBlock(),o>0&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Rating,{"data-aid":i.RATING_RENDERED,rating:o,style:A.ratingStar}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:A.overallReviews},s.replace("{totalReviews}",r)))}render(){const{provider:e,overallRating:t,totalReviews:a,businessName:o,positiveRecommendations:r,negativeRecommendations:s,pageLink:c,staticContent:p,isMobile:d,hasBgImage:m,category:b,section:h}=this.props;if(U.includes(e))return null;const E=this.generateReviewBarStyles();E.linkProps.href=c;const R=e===g?p.viewAllProductReviews:p.viewAllReviews,y=e===l&&r>0?r+s:a;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{category:m?"accent":b,section:m?"overlay":h},!d&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Element,n({},E.linkProps,{style:{"text-decoration-line":"none"}}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:A.topBar},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{marginTop:"xxsmall"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:u[e],size:"xlarge"})),e!==l&&t>0&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Major,{style:A.overallRating},t.toFixed(1)),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:A.overallRatingContainer},this.getDesktopRatingBar()))),d&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{style:A.mobileTopBarContainer},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text.Major,{"data-aid":i.REVIEWS_BUSINESS_NAME_RENDERED,style:{marginBottom:"xxsmall",textAlign:"center"},children:o}),this.getMobileRatingBar(),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{style:A.pageLinkContainer},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Element,{tag:"a",target:"_blank",href:c,style:A.pageLink},R.replace("{totalReviews}",1===y?"":y)))))}}r(B,"propTypes",{provider:(global.PropTypes||guac["prop-types"]).string,overallRating:(global.PropTypes||guac["prop-types"]).number,totalReviews:(global.PropTypes||guac["prop-types"]).number,isMobile:(global.PropTypes||guac["prop-types"]).bool,pageLink:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,hasBgImage:(global.PropTypes||guac["prop-types"]).bool,businessName:(global.PropTypes||guac["prop-types"]).string,category:(global.PropTypes||guac["prop-types"]).string,section:(global.PropTypes||guac["prop-types"]).string,positiveRecommendations:(global.PropTypes||guac["prop-types"]).number,negativeRecommendations:(global.PropTypes||guac["prop-types"]).number}),r(B,"defaultProps",{provider:l,overallRating:0,totalReviews:0});var L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},W=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}();function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var j=function(e){function t(){var e;X(this,t);for(var a=arguments.length,o=Array(a),r=0;r<a;r++)o[r]=arguments[r];var n=H(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return n.state={},n.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},n.elements={},n.onResize=n.onResize.bind(n),n.onTruncate=n.onTruncate.bind(n),n.calcTargetWidth=n.calcTargetWidth.bind(n),n.measureWidth=n.measureWidth.bind(n),n.getLines=n.getLines.bind(n),n.renderLine=n.renderLine.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(global.React||guac.react).Component),W(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,a=this.onResize,o=document.createElement("canvas");this.canvasContext=o.getContext("2d"),t((function(){e&&e.parentNode.removeChild(e)})),window.addEventListener("resize",a)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate(),this.props.width!==e.width&&this.calcTargetWidth()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,a=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(a)}},{key:"innerText",value:function(e){var t=document.createElement("div"),a="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var o=t[a],r=document.createElement("div");return r.innerHTML="foo<br/>bar","foo\nbar"!==r[a].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),o=t[a]),o}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"==typeof t&&(this.timeout=window.requestAnimationFrame((function(){t(e)})))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,a=this.calcTargetWidth,o=this.canvasContext,r=this.props.width;if(t){var n=r||Math.floor(t.parentNode.getBoundingClientRect().width);if(!n)return window.requestAnimationFrame((function(){return a(e)}));var i=window.getComputedStyle(t),l=[i["font-weight"],i["font-style"],i["font-size"],i["font-family"]].join(" ");o.font=l,this.setState({targetWidth:n},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,a=t.lines,o=t.ellipsis,r=t.trimWhitespace,n=this.state.targetWidth,i=this.innerText,l=this.measureWidth,s=this.onTruncate,c=this.trimRight,g=[],p=i(e.text).split("\n").map((function(e){return e.split(" ")})),d=!0,u=this.ellipsisWidth(this.elements.ellipsis),m=1;m<=a;m++){var b=p[0];if(0!==b.length){var h=b.join(" ");if(l(h)<=n&&1===p.length){d=!1,g.push(h);break}if(m===a){for(var E=b.join(" "),R=0,y=E.length-1;R<=y;){var w=Math.floor((R+y)/2);l(E.slice(0,w+1))+u<=n?R=w+1:y=w-1}var v=E.slice(0,R);if(r)for(v=c(v);!v.length&&g.length;){v=c(g.pop())}h=(global.React||guac.react).createElement("span",null,v,o)}else{for(var C=0,f=b.length-1;C<=f;){var T=Math.floor((C+f)/2);l(b.slice(0,T+1).join(" "))<=n?C=T+1:f=T-1}if(0===C){m=a-1;continue}h=b.slice(0,C).join(" "),p[0].splice(0,C)}g.push(h)}else g.push(),p.shift(),m--}return s(d),g}},{key:"renderLine",value:function(e,t,a){if(t===a.length-1)return(global.React||guac.react).createElement("span",{key:t},e);var o=(global.React||guac.react).createElement("br",{key:t+"br"});return e?[(global.React||guac.react).createElement("span",{key:t},e),o]:o}},{key:"render",value:function(){var e=this,t=this.elements.target,a=this.props,o=a.children,r=a.ellipsis,n=a.lines,i=function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(a,["children","ellipsis","lines"]),l=this.state.targetWidth,s=this.getLines,c=this.renderLine,g=this.onTruncate,p=void 0;return"undefined"!=typeof window&&!(!t||!l)&&(n>0?p=s().map(c):(p=o,g(!1))),delete i.onTruncate,delete i.trimWhitespace,(global.React||guac.react).createElement("span",L({},i,{ref:function(t){e.elements.target=t}}),(global.React||guac.react).createElement("span",null,p),(global.React||guac.react).createElement("span",{ref:function(t){e.elements.text=t}},o),(global.React||guac.react).createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},r))}}]),t}();j.propTypes={children:(global.PropTypes||guac["prop-types"]).node,ellipsis:(global.PropTypes||guac["prop-types"]).node,lines:(global.PropTypes||guac["prop-types"]).oneOfType([(global.PropTypes||guac["prop-types"]).oneOf([!1]),(global.PropTypes||guac["prop-types"]).number]),trimWhitespace:(global.PropTypes||guac["prop-types"]).bool,width:(global.PropTypes||guac["prop-types"]).number,onTruncate:(global.PropTypes||guac["prop-types"]).func},j.defaultProps={children:"",ellipsis:"…",lines:1,trimWhitespace:!1,width:0};const V=[g],F=240,G=240,z={common:{display:"flex",flexGrow:"1",flexShrink:"0",flexBasis:"auto",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},topContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},photoContainer:{width:"100px",height:"100px",borderRadius:"50%",backgroundColor:"rgba(240,240,240,0.8)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},photoStyles:{width:"100px",height:"100px",display:"inline-block"},firstInitial:{color:"#CBCBCB",lineHeight:"1",padding:"medium",fontSize:"xxxlarge"},reviewBodyContainer:{display:"flex",flexDirection:"column",justifyContent:"space-between",paddingHorizontal:"medium",paddingVertical:"medium",textTransform:"none",flexGrow:2,width:"100%"},reviewTitle:{marginBottom:"small",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"normal"},sharedReviewContent:{lineHeight:"1.3",minHeight:"42px"},reviewerContainer:{paddingHorizontal:"medium",width:"100%",display:"flex",justifyContent:"center",alignItems:"center","@xs-only":{marginTop:"0"}},reviewer:{paddingHorizontal:"small",fontSize:"xsmall",lineHeight:"normal"},recommendationContainer:{paddingTop:"medium",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},icons:{facebook:{color:"#4267B2",height:"25px",width:"25px"},recommendation:{width:"20px"}},fullReview:{position:"absolute",width:"100%",height:"100%",top:"100%",opacity:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"action",color:"action",padding:"small",transition:"all 0.3s ease","@md":{padding:"medium"}},fullReviewHover:{overflow:"hidden","@md":{":hover":{".fullreview":{opacity:1,top:0,zIndex:1}}}},fullReviewClose:{position:"absolute",top:"16px",right:"16px",cursor:"pointer"},fullReviewOverlayShowOnMobile:{opacity:1,top:0,zIndex:1},linkContainer:{marginTop:"small"},ratingStars:{marginTop:"medium","@xs-only":{marginTop:"small"}}},$=[l,s,g],q=[p],K=[g],Y=["positive","negative"];class J extends(global.React||guac.react).Component{constructor(){super(...arguments),this.state={truncated:!1,imageFailed:!1,showFullReviewOverlay:!1,showExternalLink:!1},this.handleTruncate=this.handleTruncate.bind(this),this.toggleFullReviewOverlay=this.toggleFullReviewOverlay.bind(this),this.handleImageError=this.handleImageError.bind(this),this.getTotalReviewLines=this.getTotalReviewLines.bind(this),this.cardComponent=(global.React||guac.react).createRef()}handleTruncate(e){const{provider:t}=this.props;this.state.truncated!==e&&this.setState({truncated:e,showExternalLink:$.includes(t)})}toggleFullReviewOverlay(){this.setState({showFullReviewOverlay:!this.state.showFullReviewOverlay})}handleImageError(){this.setState({imageFailed:!0})}getReviewerPhoto(e,t){const{sourceType:a}=this.props,{imageFailed:o}=this.state;let r,l;e.photo?l=e.photo:(r=e.imageData||{},l=r.image||"");let s=l&&(l.toLowerCase().startsWith("http")||l.startsWith("//"))?l:null;const c="dynamic"===a;e.metadata&&e.metadata.reviewerId&&y[t]&&(s=y[t].replace("{id}",e.metadata.reviewerId));const g=e.name?e.name.charAt(0).toUpperCase():null,p=c?{src:s}:{imageData:r,imageSrcCallback:e=>e?e.replace(/{width}/g,100).replace(/{height}/g,100):""};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:z.photoContainer},s&&!o&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Image.Thumbnail,n({tag:"img","data-aid":i.REVIEWER_PHOTO_RENDERED,style:z.photoStyles,onError:this.handleImageError},p)),(!s||o)&&g&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{"data-aid":i.REVIEWER_INITIAL_RENDERED,children:g,style:z.firstInitial}))}getRatingBlock(){const{provider:e,data:t,staticContent:a,renderMode:o}=this.props;if(e===l&&t.recommendation&&Y.includes(t.recommendation))return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":i.RECOMMENDATION_RENDERED,style:z.recommendationContainer},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{"data-aid":i.RECOMMENDATION_ICON_RENDERED,icon:h[t.recommendation],style:z.icons.recommendation}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{"data-aid":i.RECOMMENDATION_TEXT_RENDERED,style:{paddingLeft:"small"}},a[E[t.recommendation]]));const r=e===p&&o!==(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT&&"0"===t.rating?"hidden":"visible";return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Rating,{"data-aid":i.RATING_RENDERED,style:{...z.ratingStars,visibility:r},rating:t.rating})}getTruncatedLine(e,t,a=!1){return(global.React||guac.react).createElement(j,{lines:1,ellipsis:a?'..."':"...",trimWhitespace:!0,width:e?F:G},`${t}`)}sanitizeLink(e,t){return V.includes(t)||!e||e.startsWith("http")?e:`//${e}`}componentDidUpdate(e){const{data:t}=this.props,{data:a}=e;t.photo===a.photo&&(global._||guac.lodash).get(t,"imageData.image")===(global._||guac.lodash).get(a,"imageData.image")||this.setState({imageFailed:!1})}componentDidMount(){const e=this.cardComponent.current&&(global.ReactDOM||guac["react-dom"]).findDOMNode(this.cardComponent.current),t=e&&e.offsetWidth||0;this.setState({currentCardWidth:t})}getTotalReviewLines(e){const{isMobile:t,provider:a}=this.props,{currentCardWidth:o}=this.state;if(t||!t&&e)return 3;return o&&o<=300?2:a===p?4:3}render(){const{data:e,provider:t,isMobile:a,desktopMobilePreview:o,link:r,staticContent:n,market:l,cardHeight:s}=this.props,{truncated:c,showExternalLink:g,showFullReviewOverlay:d}=this.state,u=q.includes(t)&&(global._||guac.lodash).get(e,"link",!1),b=c&&!(u||g),h=K.includes(t)&&!!(e&&e.metadata&&e.metadata.product),E=K.includes(t)?"0.6":"1",R=e&&e.metadata&&e.metadata.title||"",y=this.getTotalReviewLines(u),w=t===p,v={card:{textAlign:"center",borderWidth:"0px",textShadow:"none",position:"relative",boxShadow:"2px 6px 30px 0 rgba(0,0,0,0.18)",paddingVertical:"large",height:s,width:"290px","@xs-only":{paddingVertical:"medium"}}},C=b?z.fullReviewHover:{},f=d?z.fullReviewOverlayShowOnMobile:{};a&&(o||(v.card.minWidth="290px",v.card.width="auto"));let T=((e,t)=>{if(!e||!Date.parse(e))return"";if(/^\d{4}-\d{2}-\d{2}/.test(e)){const a=e.split(/\D+/).map((e=>parseInt(e,10)));return a[1]=a[1]-1,new Date(...a).toLocaleDateString(t)}return new Date(e).toLocaleDateString(t)})(e.date,l);return!T&&w&&e.date&&(T=e.date),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Card,{ref:this.cardComponent,style:{...z.common,...v.card,...C}},b&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{...z.fullReview,...f},className:"fullreview",category:"accent",section:"overlay"},a&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:"close",style:z.fullReviewClose,onClick:this.toggleFullReviewOverlay}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{children:e.body,style:{color:"action",...z.sharedReviewContent}})),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{style:z.topContainer},this.getReviewerPhoto(e,t),this.getRatingBlock()),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:z.reviewBodyContainer},h&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Link,{"data-aid":i.PRODUCT_LINK_RENDERED,target:"_self",href:this.sanitizeLink(e.link||r,t)},this.getTruncatedLine(a,e.metadata.product)),R&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{"data-aid":i.REVIEW_TITLE_RENDERED,style:z.reviewTitle},R),e.body&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:{...z.sharedReviewContent,opacity:E},featured:!0},(global.React||guac.react).createElement(j,{"data-aid":i.USER_REVIEW_RENDERED,lines:y,ellipsis:'..."',trimWhitespace:!0,width:a?F:G,onTruncate:this.handleTruncate},`"${e.body}"`)),!e.body&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Details,{"data-aid":i.STATIC_REVIEW_RENDERED},n.noWrittenReviews),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{...z.linkContainer}},(u||g)&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Forward,{"data-aid":i.READ_MORE_RENDERED,target:h?"_self":"_blank",href:this.sanitizeLink(e.link||r,t)},n.readFullReview),a&&c&&!(u||g)&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Link,{tag:"span",onClick:this.toggleFullReviewOverlay,children:n.viewMore||"View More"}))),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:z.reviewerContainer},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:m[t],size:"medium",style:z.icons[t]}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Details.Minor,{"data-aid":i.REVIEWER_INFO_RENDERED,tag:"p",style:z.reviewer},(global.React||guac.react).createElement("strong",null,e.name,e.name&&T?" - ":""),T))))}}r(J,"propTypes",{data:(global.PropTypes||guac["prop-types"]).object.isRequired,provider:(global.PropTypes||guac["prop-types"]).string.isRequired,link:(global.PropTypes||guac["prop-types"]).string,isMobile:(global.PropTypes||guac["prop-types"]).bool,nextPageHandler:(global.PropTypes||guac["prop-types"]).func,previousPageHandler:(global.PropTypes||guac["prop-types"]).func,desktopMobilePreview:(global.PropTypes||guac["prop-types"]).bool,staticContent:(global.PropTypes||guac["prop-types"]).object,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired,market:(global.PropTypes||guac["prop-types"]).string,sourceType:(global.PropTypes||guac["prop-types"]).string,cardHeight:(global.PropTypes||guac["prop-types"]).string});const Z="static",{MatchMedia:Q,IntersectionObserver:ee}=(global.Core||guac["@wsb/guac-widget-core"]).UX,te="290px",ae=l,oe=[c,s],re=[g],ne=["commerce","managedStandardCommerce"],ie={small:430,medium:440,large:460,xlarge:480},le={container:{textAlign:"center",display:"flex",flexDirection:"column"},cardsContainer:{position:"relative"},arrow:{width:"medium",position:"absolute",top:"50%",zIndex:1,cursor:"pointer",color:"section",":hover":{color:"rgba(288, 288, 288, 0.6)"}},grid:{alignItems:"center",justifyContent:"center",flexWrap:"nowrap"},cell:{flexGrow:0},paginationContainer:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"xlarge"},pageDot:{width:"12px",height:"12px",borderRadius:"50%",margin:"xsmall",cursor:"pointer",backgroundColor:"sectionContrast",opacity:.6,boxShadow:"1px 2px 15px 0 rgba(0,0,0,0.18)"},selected:{opacity:1}};class se extends(global.React||guac.react).Component{constructor(){super(...arguments),r(this,"inView",(()=>{this.setState({visible:!0})})),r(this,"handleMatchMedia",(e=>{const{viewDevice:t,renderMode:a}=this.props,o=a===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH?"xs"===e.size||"sm"===e.size:/mobile/i.test(t);let r=3;o?r=1:"md"===e.size&&(r=2),this.setState({isMobile:o,cardsPerPage:r,size:e.size})})),this.state={data:{},currentPage:1,pages:0,provider:ae,state:C,isMobile:!1,cardsPerPage:3,dummyData:!1,planUpgradeRequired:!1,visible:!1}}updateCurrentPage(e){return()=>{this.setState({currentPage:e})}}gotoPage(e=!0){return()=>{const{currentPage:t,pages:a}=this.state;let o=t+(e?1:-1);e?o>a&&(o=1):o<1&&(o=a),this.setState({currentPage:o})}}getPageDotStyles(e){const{currentPage:t}=this.state;let a=le.pageDot;return t===e&&(a=(global._||guac.lodash).merge({},le.pageDot,le.selected)),a}fetchData(){const{renderMode:e,providerType:t,planType:a,sourceType:o,manualReviews:r,staticContent:n}=this.props;if(o===Z)if(r.length){const e=((e=[],t="Anonymous")=>{const a={totalReviews:e.length,reviews:[]};return e.length&&(global._||guac.lodash).each(e,(e=>{a.reviews.push({imageData:e.photo||{},name:e.name||t,date:e.date||"",rating:e.rating,body:e.body,link:e.link||null,metadata:{title:e.title}})})),a})(r,n.anonymous);this.setState({data:e,state:f}),this.updatePageCount(e)}else this.setState({state:D});else if(re.includes(t)&&!ne.includes(a))this.setState({planUpgradeRequired:!0,state:v});else{this.setState({planUpgradeRequired:!1,state:C});const t=this.getProvider();this.fetchDataForProviders((a=>{a?(this.setState({data:a,state:f}),this.updatePageCount(a)):e===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT&&oe.includes(t)&&this.checkConnectStatusForProvider(t)}))}}fetchDataForProviders(e){const{websiteId:t,env:a}=this.props;let o=((e,t,a)=>a===g?`https://web.archive.org/web/20220420183950/https://proxy.apps-api.instantpage.${_.reseller[e]}/v1/proxy/yotpo?websiteId=${t}`:`https://web.archive.org/web/20220420183950/https://proxy.apps-api.instantpage.${_.reseller[e]}/v1/proxy/stats?id=${t}&source=${b[a]}`)(a,t,this.getProvider());if("production"!==String(a)){const e=window.location.search.indexOf("dummy=true");e>=0?(o=`${o}&${window.location.search.substring(e)}`,this.setState({dummyData:!0})):this.setState({dummyData:!1})}if("undefined"!=typeof XMLHttpRequest){const t=new XMLHttpRequest;t.onreadystatechange=()=>{if(4===t.readyState){if(200===t.status){const a=JSON.parse(t.responseText);return a.updateDate?(this.setState({providerState:I}),0===a.reviews.length?(this.setState({state:D}),void e(null)):(this.setState({state:f}),void e(a))):(this.setState({state:v,providerState:a.connected?I:N}),void e(null))}this.setState({state:T})}e(null)},t.open("GET",o,!0),t.send()}}checkConnectStatusForProvider(e){const{accountId:t,env:a,isReseller:o}=this.props;if("production"!==a&&this.state.dummyData)this.setState({providerState:I});else{const r=((e,t,a)=>`https://web.archive.org/web/20220420183950/https://proxy.apps-api.instantpage.${a?_.reseller[e]:_.godaddy[e]}/v1/proxy/social?accountId=${t}`)(a,t,o);if("undefined"!=typeof XMLHttpRequest){const t=new XMLHttpRequest;t.onreadystatechange=()=>{if(4===t.readyState&&200===t.status){const a=JSON.parse(t.responseText);this.setConnectStatus(a,e)}},t.open("GET",r,!0),t.withCredentials=!0,t.send(null)}}}setConnectStatus(e,t=c){const a=e&&e[t];if(a){const e=Object.keys(a)&&Object.keys(a)[0]||null,t=e&&a[e]&&a[e].status||N,o="PUBLISHED"===t?I:t;this.setState({providerState:o})}else this.setState({providerState:N})}componentDidUpdate(e,t){(this.props.providerType!==e.providerType||this.props.sourceType!==e.sourceType||this.props.sourceType===Z&&!(global._||guac.lodash).isEqual(e.manualReviews,this.props.manualReviews)||this.state.cardsPerPage!==t.cardsPerPage)&&this.fetchData()}componentDidMount(){this.fetchData()}getProvider(){const{sourceType:e,providerType:t}=this.props;return e===Z?p:t||ae}updatePageCount(e){const{cardsPerPage:t}=this.state;let a=0;const o=e.reviews.length>9?9:e.reviews.length;o&&(a=Math.floor(o/t),a+=o/t%1>0?1:0),this.setState({pages:a})}getPageLink(e,t){if(t===p)return null;let a=w.base[t];return e&&e.metadata&&(e.metadata.pageId||e.metadata.link)&&(t===l?a=`${a}/${e.metadata.pageId}/reviews`:t===c?a=`${a}/maps?cid=${e.metadata.pageId}`:t===s?a=`${a}/${e.metadata.pageId}`:t===g&&(a=e.metadata.link||"/")),a}getCardHeight(){const{fontScale:e}=this.context;return ie[e]}renderMobileCards(e,t){const{data:a,isMobile:r}=this.state,{renderMode:n,viewDevice:i,staticContent:l,market:s,sourceType:c}=this.props;if(!a.reviews)return null;const g=n===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PREVIEW&&"MOBILE_RENDER_DEVICE"===String(i)&&window.innerWidth>768,p=a.reviews.length>1,d=`${this.getCardHeight()}px`;return(global.React||guac.react).createElement(o,{slideHeight:d,viewportWidth:"100%",slideWidth:g?"290px":te,cellPadding:10,initialSlide:p?1:0,clickToNavigate:!1,infinite:p,dots:!1,arrows:!1,style:{slide:{opacity:"1",verticalAlign:"top"},selectedSlide:{opacity:"1"}}},(global._||guac.lodash).range(a.reviews.length).map((o=>a.reviews&&a.reviews[o]&&(global.React||guac.react).createElement(J,{desktopMobilePreview:g,key:`mobile-review-card-${o}`,data:a.reviews[o],provider:e,isMobile:r,market:s,staticContent:l,renderMode:n,link:t,sourceType:c,cardHeight:d}))))}getCards(){const{currentPage:e,data:t,isMobile:a,cardsPerPage:o}=this.state,{renderMode:r,staticContent:n,market:i,sourceType:l}=this.props,s=this.getProvider(),c=e*o,g=this.getPageLink(t,s);return a?this.renderMobileCards(s,g):(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{style:le.grid},(global._||guac.lodash).takeRight([c-3,c-2,c-1],o).map((e=>t.reviews&&t.reviews[e]&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,{key:e,style:le.cell},(global.React||guac.react).createElement(J,{data:t.reviews[e],provider:s,isMobile:a,nextPageHandler:this.gotoPage(!0),previousPageHandler:this.gotoPage(!1),staticContent:n,market:i,renderMode:r,link:g,sourceType:l,cardHeight:`${this.getCardHeight()}px`})))))}getNavigationArrow(e){const{hasBgImage:t,category:a,section:o}=this.props;let r,n,l,s;return e===P?(r=(global._||guac.lodash).merge({},le.arrow,{right:"-35px"}),n=this.gotoPage(!0),l="chevronRight",s=i.RIGHT_ARROW_RENDERED):(r=(global._||guac.lodash).merge({},le.arrow,{left:"-40px"}),n=this.gotoPage(!1),l="chevronLeft",s=i.LEFT_ARROW_RENDERED),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":s,category:t?"accent":a,section:t?"overlay":o,onClick:n,style:r},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:l}))}getPaginationControl(){const{pages:e}=this.state;return e>1&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:le.paginationContainer},(global._||guac.lodash).range(e).map((t=>{const a=t+1;return e>=a?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:this.getPageDotStyles(a),onClick:this.updateCurrentPage(a)}):null})))}getConnectProviderHandler(e=!1){return()=>{const{isReseller:t,env:a,accountId:o,websiteId:r}=this.props,n=this.getProvider(),i=e?k:M;window.location.href=i[n].replace("{rootDomain}",((e,t)=>(t?_.reseller:_.godaddy)[e])(a,t)).replace("{accountId}",o).replace("{websiteId}",r).replace("{home}",window.location.href)}}renderMessageInContainer(e,t,a,o){if(!e)return null;const r={container:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center"},messageBlock:{paddingHorizontal:a?"xsmall":"xxlarge",paddingVertical:a?"large":"xlarger",margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",backgroundColor:"section"},icon:{width:"45px",height:"45px",marginBottom:"medium"}};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{style:r.container},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{category:"accent",section:"overlay",style:r.messageBlock},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:u[o],style:r.icon}),e)))}displayNoReviewsMessage(){const{isMobile:e}=this.state,{staticContent:t,hasBgImage:a}=this.props,o=(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:{fontWeight:"bold"},children:t.comingSoon,"data-aid":i.REVIEWS_NO_DATA_RENDERED});return this.renderMessageInContainer(o,a,e,this.getProvider())}displayMessages(e,t,a,o){const{isMobile:r}=this.state,{hasBgImage:n}=this.props,i=(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:{fontWeight:"bold"},children:e,"data-aid":a}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:{marginTop:"medium"},children:t,"data-aid":o}));return this.renderMessageInContainer(i,n,r,this.getProvider())}displayPendingMessage(){const{staticContent:e}=this.props;return this.displayMessages(e.txtPendingValidation,e.gmb3Days,i.PENDING_VALIDATION_HEADER,i.PENDING_VALIDATION_CONTENT)}displayWaitMessage(){const{staticContent:e}=this.props;return this.displayMessages(e.connectionSuccess,e.twentyFourHourLag,i.WAITING_FOR_DATA_HEADER,i.WAITING_FOR_DATA_CONTENT)}displayConnectOrUpgradeMessage(e=!1){const{staticContent:t,renderMode:a,publishDate:o,publishAfterLastUpgrade:r}=this.props,n=this.getProvider(),l=oe.concat(re).includes(n)&&(!o||r),s=R[n],c={renderMode:a,beforeContent:(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:u[n],style:{width:"45px",height:"45px",marginBottom:"medium"}}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{typography:"none",children:t[e?"upgradeMessage":"connectMsg"].replace("{provider}",s),"data-aid":e?i.UPGRADE_TIER_MSG:i.REVIEWS_NOT_CONNECTED_MSG}),l&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{marginTop:"medium"}},t.publishMessage.replace("{provider}",s))),button:{typography:"none",style:l?{opacity:"0.6",pointerEvents:"none"}:{opacity:"1"},onClick:e?this.getConnectProviderHandler(!0):this.getConnectProviderHandler(),children:t[e?"upgradeNow":"connectBtnText"].replace("{provider}",s),"data-event":d[n],"data-aid":i.REVIEWS_CONNECT_BUTTON}};return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.ZeroStateOverlay,c)}renderReviews(){const{data:e,isMobile:t}=this.state,a=e.reviews&&e.reviews.length>this.state.cardsPerPage;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:le.container},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:le.cardsContainer},!t&&a&&this.getNavigationArrow(x),this.getCards(),!t&&a&&this.getNavigationArrow(P)),!t&&this.getPaginationControl())}showWaitMessage(){const{state:e,providerState:t}=this.state,{renderMode:a,gmbShowPendingMessage:o,fbPageId:r}=this.props,n=this.getProvider();return a===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT&&e===v&&(n===c?t===I&&!o:n===l?!!r:(n===s||n===g)&&t===I)}isProviderNotSetup(e){const{providerState:t,planUpgradeRequired:a}=this.state;if(a)return!1;return oe.concat(re).includes(e)?!(t===I):e===l?!this.props.fbPageId:e!==p}providerHasReviews(e){const{manualReviews:t}=this.props;return e===p?t&&t.length:this.state.state===f}getContainerStyles(e,t){const{renderMode:a}=this.props;let o="50px";a!==(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT&&(o=e?"300px":"500px");const r={display:"flex",flexDirection:"column",minHeight:o};return t&&(r.padding="0",r.margin="0"),r}displayReviewBar(e,t){const{staticContent:a,hasBgImage:o}=this.props,{isMobile:r,data:l,state:s}=this.state,c=l&&l.metadata&&l.metadata.name||"";return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{style:e},(global.React||guac.react).createElement(B,n({},this.props,{hasBgImage:o,overallRating:l.overallRating||0,businessName:c,provider:t,staticContent:a,isMobile:r,pageLink:this.getPageLink(l,t),totalReviews:l.totalReviews||0,negativeRecommendations:l.negativeRecommendations||0,positiveRecommendations:l.positiveRecommendations||0})),s===C?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Loader,{"data-aid":i.REVIEWS_LOADER,style:{margin:"0 auto"}}):this.renderReviews())}render(){const{isMobile:e,state:t,planUpgradeRequired:a,visible:o}=this.state,{hasBgImage:r,gmbShowPendingMessage:n,renderMode:i,category:l,section:s}=this.props,c=this.getProvider(),g=this.providerHasReviews(c),p=this.isProviderNotSetup(c),d=n&&!g&&i===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT,u=t===D||i!==(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.EDIT&&t===v,m=this.getContainerStyles(u,e);return o?(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,{category:r?"accent":l,section:r?"overlay":s,style:m,group:"Group"},(global.React||guac.react).createElement(Q,{onChange:this.handleMatchMedia}),g&&this.displayReviewBar(m,c),a&&this.displayConnectOrUpgradeMessage(!0),this.showWaitMessage()&&this.displayWaitMessage(),u&&this.displayNoReviewsMessage(),!g&&p&&this.displayConnectOrUpgradeMessage(),d&&this.displayPendingMessage()):(global.React||guac.react).createElement(ee,{callback:this.inView})}}r(se,"propTypes",{viewDevice:(global.PropTypes||guac["prop-types"]).string.isRequired,renderMode:(global.PropTypes||guac["prop-types"]).string.isRequired,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,accountId:(global.PropTypes||guac["prop-types"]).string.isRequired,isReseller:(global.PropTypes||guac["prop-types"]).bool.isRequired,env:(global.PropTypes||guac["prop-types"]).string.isRequired,staticContent:(global.PropTypes||guac["prop-types"]).object,hasBgImage:(global.PropTypes||guac["prop-types"]).bool,publishDate:(global.PropTypes||guac["prop-types"]).string,category:(global.PropTypes||guac["prop-types"]).string,section:(global.PropTypes||guac["prop-types"]).string,gmbShowPendingMessage:(global.PropTypes||guac["prop-types"]).bool,providerType:(global.PropTypes||guac["prop-types"]).string,fbPageId:(global.PropTypes||guac["prop-types"]).string,planType:(global.PropTypes||guac["prop-types"]).string,publishAfterLastUpgrade:(global.PropTypes||guac["prop-types"]).bool,sourceType:(global.PropTypes||guac["prop-types"]).string,manualReviews:(global.PropTypes||guac["prop-types"]).array,market:(global.PropTypes||guac["prop-types"]).string}),r(se,"contextTypes",{fontScale:(global.PropTypes||guac["prop-types"]).string}),e.default=se})),"undefined"!=typeof window&&(window.global=window);


}
/*
     FILE ARCHIVED ON 18:39:50 Apr 20, 2022 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 11:02:12 Jun 19, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.663
  exclusion.robots: 0.028
  exclusion.robots.policy: 0.014
  esindex: 0.013
  cdx.remote: 45.11
  LoadShardBlock: 218.854 (3)
  PetaboxLoader3.datanode: 284.231 (5)
  load_resource: 297.374 (2)
  PetaboxLoader3.resolve: 184.96 (2)
*/